<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Yinnotayl ‚Äî Home</title>
    <link rel="icon" type="image/png" href="yinnotayl.png">
    <style>
        :root {
            --bg1: #fff;
            --bg2: #f3f8ff;
            --accent: #6a0dad;
            --muted: #5a5a5a;
            --card: #ffffffdd;
            --radius: 14px;
            --max-width: 640px;
            --gap: 18px;
            --word-gap: 8px;
        }

        * {
            box-sizing: border-box
        }

        html,
        body {
            height: 100%
        }

        body {
            margin: 0;
            font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
            background: var(--bg1);
            color: #222;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            padding: 36px 20px;
            display: flex;
            justify-content: center;
            padding-bottom: 120px;
        }

        .wrap {
            width: 100%;
            max-width: var(--max-width);
        }

        header {
            display: flex;
            align-items: center;
            gap: 18px;
            margin-bottom: 22px;
            justify-content: space-between;
        }

        .brand {
            display: flex;
            gap: 16px;
            align-items: center;
        }

        .logo {
            width: 80px;
            height: 80px;
            border-radius: 14px;
            display: inline-grid;
            place-items: center;
            background: linear-gradient(135deg, #ffe6fb, #dbe9ff);
            font-weight: 700;
            color: var(--accent);
            font-size: 30px;
            box-shadow: 0 10px 28px rgba(100, 80, 150, 0.08);
            transform: translateY(6px);
        }

        h1 {
            font-size: 1.6rem;
            margin: 0;
            color: var(--accent);
            letter-spacing: 0.2px
        }

        .sub {
            margin: 6px 0 0 0;
            color: var(--muted);
            font-size: 1.03rem
        }

        .card {
            background: var(--card);
            padding: 20px;
            border-radius: var(--radius);
            box-shadow: 0 10px 30px rgba(30, 30, 50, 0.06);
            margin-bottom: 18px;
            backdrop-filter: blur(4px);
        }

        .intro {
            display: flex;
            gap: 16px;
            align-items: center;
            justify-content: space-between;
            flex-wrap: wrap;
        }

        .left {
            min-width: 0;
        }

        .links {
            display: flex;
            gap: 12px;
            align-items: center;
            margin-top: 8px;
        }

        a.btn {
            display: inline-block;
            text-decoration: none;
            padding: 12px 16px;
            border-radius: 12px;
            border: 1px solid rgba(106, 13, 173, 0.12);
            color: var(--accent);
            font-weight: 700;
            font-size: 1rem;
        }

        a.small {
            font-size: 0.95rem;
            color: var(--muted);
            text-decoration: none;
            padding: 10px 12px;
            border-radius: 10px;
            border: 1px solid transparent;
        }

        /* Poem area */
        #poem-wrap {
            margin-top: 12px;
            padding: 24px;
            border-radius: 12px;
            background: linear-gradient(180deg, rgba(255, 255, 255, 0.9), rgba(255, 255, 255, 0.75));
        }

        .poem-line {
            margin: 12px 0;
            line-height: 1.6;
            font-size: 1.02rem;
            color: #1f1f1f;
            white-space: normal;
            text-align: left;
        }

        /* stronger word animation */
        .poem-line .word {
            display: inline-block;
            margin-right: var(--word-gap);
            opacity: 0;
            transform: translateY(22px) scale(0.995);
            transition: opacity 720ms cubic-bezier(.16, .9, .3, 1), transform 720ms cubic-bezier(.16, .9, .3, 1);
            will-change: opacity, transform;
            font-weight: 500;
        }

        .poem-line .word.visible {
            opacity: 1;
            transform: translateY(0) scale(1);
        }

        /* Button Styling */
        /* BUTTONS: add to your <style> */
        .btn {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            padding: 10px 14px;
            border-radius: 12px;
            font-weight: 700;
            font-size: 0.97rem;
            text-decoration: none;
            border: 1px solid transparent;
            transition: transform 160ms cubic-bezier(.16, .9, .3, 1), box-shadow 160ms;
            transform-origin: center;
            user-select: none;
        }

        /* variants */
        .btn--primary {
            background: linear-gradient(180deg, #7a33c8, #5f1fa8);
            color: white;
            box-shadow: 0 8px 20px rgba(90, 40, 140, 0.12);
        }

        .btn--outline {
            background: transparent;
            color: var(--accent);
            border-color: rgba(106, 13, 173, 0.12);
        }

        .btn--ghost {
            background: rgba(255, 255, 255, 0.7);
            color: #333;
            border-color: rgba(0, 0, 0, 0.04);
            font-weight: 600;
        }

        /* small icon support */
        .btn .icon {
            display: inline-flex;
            width: 20px;
            height: 20px;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            opacity: 0.95;
        }

        /* hover & focus */
        .btn:focus,
        .btn:hover {
            transform: translateY(-4px) scale(1.01);
            box-shadow: 0 12px 28px rgba(40, 30, 80, 0.08);
            outline: none;
        }

        /* subtle active press */
        .btn:active {
            transform: translateY(-2px) scale(0.995);
        }

        /* grid for links (use on the container) */
        .link-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 12px;
            align-items: start;
        }

        /* optional small thumbnail inside link */
        .thumb {
            width: 40px;
            height: 28px;
            object-fit: cover;
            border-radius: 8px;
            box-shadow: 0 6px 16px rgba(30, 30, 50, 0.06);
            flex-shrink: 0;
        }

        /* Fade-in for static elements (header, cards, buttons, heading etc)
       - bigger, more visible fade & lift
       - we'll trigger when element crosses 1/3 from bottom via rootMargin */
        .fade-observe {
            opacity: 0;
            transform: translateY(22px) scale(0.995);
            transition: opacity 720ms cubic-bezier(.16, .9, .3, 1), transform 720ms cubic-bezier(.16, .9, .3, 1);
            will-change: opacity, transform;
        }

        .fade-observe.visible {
            opacity: 1;
            transform: translateY(0) scale(1);
        }

        footer {
            margin-top: 18px;
            text-align: center;
            color: var(--muted);
            font-size: 0.9rem;
        }

        /* Below-poem flexible space */
        .below-space {
            display: flex;
            flex-direction: column;
            align-items: flex-start;
            justify-content: flex-start;
            gap: 18px;
            min-height: 500px;
            margin-top: 18px;
            padding: 24px;
            border-radius: 12px;
            background: linear-gradient(180deg, rgba(250, 250, 255, 0.6), rgba(250, 250, 255, 0.45));
            color: var(--muted);
            font-size: 0.95rem;
            border: 1px dashed rgba(150, 150, 160, 0.12);
            text-align: left;
        }

        /* Make direct children full width by default (optional) */
        .below-space>* {
            width: 100%;
        }

        /* If you have elements that should stay centered, give them a helper:
   <div class="center-inline">...</div> */
        .below-space .center-inline {
            align-self: center;
            text-align: center;
            width: auto;
        }


        /* Accessibility: reduce motion */
        @media (prefers-reduced-motion: reduce) {

            .poem-line .word,
            .fade-observe {
                transition: none;
                transform: none;
            }
        }

        @media (max-width:520px) {
            body {
                padding: 20px
            }

            .logo {
                width: 80px;
                height: 80px;
                /* background-image: url("yinnotayl.png"); */
                background-size: contain;
                background-repeat: no-repeat;
                background-position: center;
            }


            h1 {
                font-size: 1.2rem
            }

            .poem-line {
                font-size: 1rem
            }

            a.btn {
                padding: 10px 14px;
                font-size: 0.95rem
            }
        }
    </style>
</head>

<body>
    <div class="wrap" role="main">
        <header>
            <div class="brand fade-observe">
                <div class="logo" aria-hidden="true">üïäÔ∏è</div>
                <div>
                    <h1>Hewwo ‚Äî I'm Yinnotayl</h1>
                    <p class="sub">codin, & birbs üïäÔ∏è</p>
                </div>
            </div>

            <div class="links fade-observe" aria-hidden="false">
                <a class="btn" href="https://github.com/yinnotayl" target="_blank" rel="noopener">GitHub</a>
                <!-- <a class="small" href="#poem-wrap">Read poem</a> -->
            </div>
        </header>

        <section class="card fade-observe">
            <div class="intro">
                <div class="left">
                    <p style="margin:0;font-size:1rem;color:#333">
                        Welcome to my GitHub Pages home~ (‚âß‚ó°‚â¶)Ôæâ
                    </p>
                    <p style="margin:8px 0 0 0;color:var(--muted);font-size:0.98rem">
                        I love codin, and birbs!
                        <br />
                        Scroll down to read a poem I wrote!
                    </p>
                </div>
            </div>
        </section>

        <!-- flexible blank area for adding content later -->
        <div class="card fade-observe">
            <h3 style="color:var(--accent)">Random Websites</h3>
            <div style="display:flex;gap:12px;flex-wrap:wrap;">
                <a href="https://yinnotayl.github.io/intenseShooter" target="_blank" class="btn">Intense Shooter</a>
                <a href="https://yinnotayl.github.io/Polytrack" target="_blank" class="btn">Polytrack</a>
            </div>

            <h3 style="color:var(--accent)">Repositories</h3>
            <div style="display:flex;gap:12px;flex-wrap:wrap;">
                <a href="https://github.com/Yinnotayl/YS-Mouse-Movement-Tracker" target="_blank" class="btn">
                    Mouse Movement Tracker
                </a>
                <a href="https://github.com/Yinnotayl/Image-Type-Converter" target="_blank" class="btn">
                    Image Type Converter
                </a>
                <a href="https://github.com/Yinnotayl/Hunt-The-Wumpus-Game-Remake-" target="_blank" class="btn">
                    Hunt The Wumpus
                </a>
                <a href="https://github.com/Yinnotayl/Randint-Game-Swift" target="_blank" class="btn">
                    Random Number Game (Swift)
                </a>
            </div>
        </div>

        <section id="poem-wrap" class="card fade-observe" aria-labelledby="poem-heading">
            <h2 id="poem-heading" style="margin:0 0 12px 0;font-size:1.5rem;color:var(--accent);">There will come soft
                rains</h2>

            <div id="poem">
                <p class="poem-line">There will come soft rains,</p>
                <p class="poem-line">falling through the veil of night,</p>
                <p class="poem-line">gentle as breath no longer drawn,</p>
                <p class="poem-line">washing away the weight of dawn.</p>
                <br />
                <p class="poem-line">There will come soft rains,</p>
                <p class="poem-line">over fields where we once lay,</p>
                <p class="poem-line">where time dissolves, and names are still,</p>
                <p class="poem-line">and every wound forgets its will.</p>
                <br />
                <p class="poem-line">Till that day</p>
                <p class="poem-line">when the rain stops falling,</p>
                <p class="poem-line">when the snow starts melting,</p>
                <p class="poem-line">when the sun stops shining.</p>
                <br />
                <p class="poem-line">Till we leave for the place</p>
                <p class="poem-line">where the sun always shines,</p>
                <p class="poem-line">where the leaves never fall,</p>
                <p class="poem-line">where hope blooms bright in endless time.</p>
                <br />
                <p class="poem-line">No clocks, no cries, just open skies,</p>
                <p class="poem-line">a hush that hums where spirit flies.</p>
                <p class="poem-line">Beyond the dark, a quiet new,</p>
                <p class="poem-line">do you feel it?</p>
                <p class="poem-line">I do</p>
            </div>

            <br />
            <br />
            <p>by Yinnotayl</p>
        </section>

        <!-- flexible blank area for adding content later -->
        <div id="randomBirb" class="below-space fade-observe" aria-live="polite" style="text-align:center;">
            <img id="birbImg" alt="Random birb"
                style="max-width:100%;height:auto;border-radius:12px;object-fit:cover;display:block;margin:0 auto 8px;"
                src="noBird.png">
            <p id="birbCaption" style="margin:6px 0;color:var(--muted)"></p>
            <div style="display:flex;gap:8px;justify-content:center;margin-top:8px;">
                <button id="newBirb" class="btn btn--primary">Another birb</button>
                <button id="shuffleBird" class="btn btn--outline">Shuffle source</button>
            </div>
        </div>

        <footer class="fade-observe">
            <small>Simple, readable, and focused ‚Äî made for quick reading. üí´</small>
        </footer>
    </div>

    <script>
        // Prepare poem words (same as before)
        (function preparePoem() {
            const lines = document.querySelectorAll('.poem-line');
            lines.forEach(line => {
                const text = line.textContent.trim();
                const words = text.split(/\s+/);
                line.innerHTML = '';
                words.forEach((w, idx) => {
                    const span = document.createElement('span');
                    span.className = 'word';
                    span.textContent = w;
                    span.dataset.index = idx;
                    line.appendChild(span);
                    line.appendChild(document.createTextNode(' '));
                });
            });
        })();

        // Stronger IntersectionObserver for .fade-observe
        (function fadeInObserver() {
            const prefersReduced = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
            if (prefersReduced) {
                // if user prefers reduced motion, keep everything visible
                document.querySelectorAll('.fade-observe').forEach(el => el.classList.add('visible'));
                return;
            }

            // Observe and TOGGLE visibility: show when crossing the 1/3-bottom line, hide when leaving it.
            const io = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('visible');
                    } else {
                        entry.target.classList.remove('visible');
                    }
                });
            }, {
                root: null,
                rootMargin: '0px 0px -33% 0px', // triggers when element crosses 1/3 from bottom
                threshold: 0
            });

            document.querySelectorAll('.fade-observe').forEach(el => io.observe(el));
        })();

        (function lineObserverReveal() {
            const lines = Array.from(document.querySelectorAll('.poem-line'));

            const io = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    const words = Array.from(entry.target.querySelectorAll('.word'));
                    if (entry.isIntersecting) {
                        // staggered reveal for nicer rhythm
                        words.forEach((w, i) => {
                            w._revealTimeout = setTimeout(() => w.classList.add('visible'), i * 35);
                        });
                    } else {
                        // cancel any pending reveals and hide words again
                        words.forEach(w => {
                            if (w._revealTimeout) { clearTimeout(w._revealTimeout); w._revealTimeout = null; }
                            w.classList.remove('visible');
                        });
                    }
                });
            }, {
                root: null,
                rootMargin: '0px 0px -25% 0px', // reveal a bit earlier before fully in view
                threshold: 0.03
            });

            lines.forEach(l => io.observe(l));
        })();


        // config
        function getApiEndpoint(family) {
            return `https://nuthatch.lastelm.software/v2/birds?family=${encodeURIComponent(family)}&hasImg=true`;
        }
        const API_KEY = '60cf5b6c-b268-4dbd-924f-4443d4d38cc5'; // consider moving to a server later
        const PLACEHOLDER = 'https://images3.memedroid.com/images/UPLOADED32/6020b8ee6ffaa.jpeg';

        let cachedBirds = null;
        let lastImgUrl = null;
        const FAMILIES = [
            'Accipitridae', 'Alcidae', 'Alcedinidae', 'Alaudidae',
            'Anatidae', 'Apodidae', 'Aramidae', 'Ardeidae',
            'Caprimulgidae', 'Cathartidae', 'Ciconiidae', 'Columbidae',
            'Corvidae', 'Cracidae', 'Cuculidae', 'Falconidae', 'Fregatidae',
            'Fringillidae', 'Gruidae', 'Haematopodidae', 'Hirundinidae',
            'Icteridae', 'Laridae', 'Laniidae', 'Odontophoridae', 'Phasianidae',
            'Podicipedidae', 'Rallidae', 'Recurvirostridae', 'Scolopacidae',
            'Stercorariidae', 'Trochilidae'
        ];
        let currentFamilyIndex = 0;

        // Convert an image entry to a usable URL (handles strings or objects)
        function getImageUrl(img) {
            if (!img) return null;
            if (typeof img === 'string') return img;
            if (typeof img === 'object') {
                // common keys that might contain URL
                return img.url || img.src || img.full || img.thumb || null;
            }
            return null;
        }

        // Fetch and return a clean array of birds that actually have at least one usable image
        async function fetchBirds(family) {
            if (cachedBirds) return cachedBirds;
            const endpoint = getApiEndpoint(family);
            const res = await fetch(endpoint, { headers: { 'api-key': API_KEY } });
            if (!res.ok) throw new Error('Network response was not OK: ' + res.status);
            const json = await res.json();

            const rawList = Array.isArray(json) ? json : (Array.isArray(json.entities) ? json.entities : []);
            const items = rawList
                .map(b => {
                    const imgs = Array.isArray(b.images) ? b.images.map(getImageUrl).filter(Boolean) : [];
                    return { ...b, images: imgs };
                })
                .filter(b => Array.isArray(b.images) && b.images.length > 0);

            cachedBirds = items;
            return items;
        }


        // pick a random bird+image safely
        function pickRandomImageFrom(birds) {
            if (!Array.isArray(birds) || birds.length === 0) return null;
            const bird = birds[Math.floor(Math.random() * birds.length)];
            if (!bird || !Array.isArray(bird.images) || bird.images.length === 0) return null;
            const imgUrl = bird.images[Math.floor(Math.random() * bird.images.length)];
            return { bird, imgUrl };
        }

        // show one random birb in DOM (defensive)
        async function showRandomBirb(family = FAMILIES[currentFamilyIndex]) {
            const imgEl = document.getElementById('birbImg');
            const captionEl = document.getElementById('birbCaption');
            const btn = document.getElementById('newBirb');

            if (btn) { btn.disabled = true; btn.classList.add('loading'); }

            imgEl.src = PLACEHOLDER;
            captionEl.textContent = 'Loading...';

            try {
                const birds = await fetchBirds(family);
                if (!Array.isArray(birds) || birds.length === 0) {
                    imgEl.src = PLACEHOLDER;
                    captionEl.textContent = 'No birb images found :(';
                    return;
                }

                let chosen = null;
                const maxTries = 8;
                for (let i = 0; i < maxTries; i++) {
                    const c = pickRandomImageFrom(birds);
                    if (!c) break;
                    if (c.imgUrl !== lastImgUrl) { chosen = c; break; }
                }
                if (!chosen) chosen = pickRandomImageFrom(birds);

                if (!chosen) {
                    imgEl.src = PLACEHOLDER;
                    captionEl.textContent = 'No birb images found :(';
                } else {
                    lastImgUrl = chosen.imgUrl;
                    imgEl.src = chosen.imgUrl;
                    imgEl.alt = `${chosen.bird.name || 'Unknown'} (${chosen.bird.sciName || ''})`;
                    captionEl.innerHTML = `<strong>${chosen.bird.name || 'Unknown'}</strong> ‚Äî <em>${chosen.bird.sciName || ''}</em>`;
                }
            } catch (err) {
                console.error('showRandomBirb error:', err);
                imgEl.src = PLACEHOLDER;
                captionEl.textContent = 'Error loading birbs.';
            } finally {
                if (btn) { btn.disabled = false; btn.classList.remove('loading'); }
            }
        }


        // call to load initially
        showRandomBirb();

        // Hook the button (run after DOM loads)
        document.addEventListener('DOMContentLoaded', () => {
            const btn = document.getElementById('newBirb');
            if (btn) {
                btn.addEventListener('click', () => showRandomBirb());
            } else {
                console.warn('newBirb button not found ‚Äî add id="newBirb" to your button.');
            }
        });

        document.addEventListener('DOMContentLoaded', () => {
            const shuffleBtn = document.getElementById('shuffleBird');
            if (shuffleBtn) {
                shuffleBtn.addEventListener('click', async () => {
                    currentFamilyIndex = (currentFamilyIndex + 1) % FAMILIES.length;
                    const currentFamily = FAMILIES[currentFamilyIndex];
                    cachedBirds = null; // force fetch new family
                    shuffleBtn.textContent = `Source: ${currentFamily}`;
                    await showRandomBirb(currentFamily);
                });
                // initialize label
                shuffleBtn.textContent = `Source: ${FAMILIES[currentFamilyIndex]}`;
            }
        });
    </script>
</body>

</html>